document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".menu__icon"),t=document.querySelector(".menu__body"),r=bodyScrollLock.disableBodyScroll,o=bodyScrollLock.enableBodyScroll;e&&e.addEventListener("click",(function(s){document.body.classList.toggle("_lock"),e.classList.toggle("_active"),t.classList.toggle("_active"),s.target.classList.contains("_active")?(r(document.body),gsap.timeline({}).staggerFromTo(".menu__body._active li, .menu__body._active .phones__link",.7,{opacity:0,y:30},{opacity:1,y:0},.03)):o(document.body)}));const s=document.querySelector(".header");let a=0;var i,l;window.addEventListener("scroll",()=>{let e=window.scrollY;e>a?(s.classList.remove("translated"),setTimeout(()=>{s.classList.remove("scrollable"),s.classList.remove("fixed")},400)):(s.classList.add("fixed"),s.classList.add("scrollable"),s.classList.add("translated")),a=e,a<100&&(s.classList.remove("scrollable"),s.classList.remove("fixed"),s.classList.remove("translated"))}),i=function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")},(l=new Image).onload=l.onerror=function(){i(2==l.height)},l.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";new Swiper(".feature__slider",{loop:!0,touchRatio:.3,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});const n=document.querySelector(".audio-btn"),c=document.querySelector("#audio");(n&&(n.addEventListener("click",e=>{e.target.classList.toggle("playing"),c.classList.contains("playing")?(c.classList.remove("playing"),c.pause()):(c.play(),c.classList.add("playing"))}),audio.addEventListener("ended",e=>{n.classList.remove("playing")})),document.querySelector(".yBox"))&&(new yBox).init();const d=document.querySelectorAll(".accordion"),p=document.querySelectorAll(".accordion__content"),m=document.querySelector(".map__svg");d.forEach(e=>{e.addEventListener("click",e=>{const t=e.currentTarget,r=t.querySelector(".accordion__control"),o=t.querySelector(".accordion__content");if(t.classList.contains("open")){if(r.setAttribute("aria-expanded",!1),o.setAttribute("aria-hidden",!0),t.classList.remove("open"),o.style.maxHeight=null,m){document.querySelectorAll(".map__icon").forEach(e=>{e.classList.contains("active")&&e.classList.remove("active")})}}else if(r.setAttribute("aria-expanded",!0),o.setAttribute("aria-hidden",!1),document.querySelectorAll(".accordion.open").forEach(e=>{e.classList.remove("open")}),t.classList.add("open"),p.forEach(e=>{e.style.maxHeight=null}),o.style.maxHeight=o.scrollHeight+"px",m){const e=document.querySelectorAll(".map__icon"),r=t.dataset.cat;e.forEach(e=>{e.classList.contains("active")&&e.classList.remove("active")}),m.querySelectorAll("[data-filter ="+r+"]").forEach(e=>{e.classList.add("active")})}})}),document.querySelector(".index")&&(new Tab(".howtoget__tabs"),new Tab(".credit__tabs"));const u=document.querySelectorAll("[data-spollers]");if(u.length>0){const e=Array.from(u).filter((function(e,t,r){return!e.dataset.spollers.split(",")[0]}));e.length>0&&y(e);const t=Array.from(u).filter((function(e,t,r){return e.dataset.spollers.split(",")[0]}));if(t.length>0){const e=[];t.forEach(t=>{const r={},o=t.dataset.spollers.split(",");r.value=o[0],r.type=o[1]?o[1].trim():"max",r.item=t,e.push(r)});let r=e.map((function(e){return"("+e.type+"-width: "+e.value+"px),"+e.value+","+e.type}));r=r.filter((function(e,t,r){return r.indexOf(e)===t})),r.forEach(t=>{const r=t.split(","),o=r[1],s=r[2],a=window.matchMedia(r[0]),i=e.filter((function(e){if(e.value===o&&e.type===s)return!0}));a.addListener((function(){y(i,a)})),y(i,a)})}function y(e,t=!1){e.forEach(e=>{e=t?e.item:e,t.matches||!t?(e.classList.add("_init"),_(e),e.addEventListener("click",g)):(e.classList.remove("_init"),_(e,!1),e.removeEventListener("click",g))})}function _(e,t=!0){const r=e.querySelectorAll("[data-spoller]");r.length>0&&r.forEach(e=>{t?(e.removeAttribute("tabindex"),e.classList.contains("_active")||(e.nextElementSibling.hidden=!0)):(e.setAttribute("tabindex","-1"),e.nextElementSibling.hidden=!1)})}function g(e){const t=e.target;if(t.hasAttribute("data-spoller")||t.closest("[data-spoller]")){const r=t.hasAttribute("data-spoller")?t:t.closest("[data-spoller]"),o=r.closest("[data-spollers]"),s=!!o.hasAttribute("data-one-spoller");o.querySelectorAll("._slide").length||(s&&!r.classList.contains("_active")&&function(e){const t=e.querySelector("[data-spoller]._active");t&&(t.classList.remove("_active"),b(t.nextElementSibling,500))}(o),r.classList.toggle("_active"),f(r.nextElementSibling,500)),e.preventDefault()}}}let b=(e,t=500)=>{e.classList.contains("_slide")||(e.classList.add("_slide"),e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout(()=>{e.hidden=!0,e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide")},t))},f=(e,t=500)=>e.hidden?((e,t=500)=>{if(!e.classList.contains("_slide")){e.classList.add("_slide"),e.hidden&&(e.hidden=!1);let r=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=r+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout(()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide")},t)}})(e,t):b(e,t);if(document.querySelector(".materials__wrapper")){const e=window.matchMedia("(min-width:1180px)");let t;const r=function(){return!0===e.matches?(void 0!==t&&t.destroy(!0,!0),document.querySelector(".materials__wrapper").classList.remove("swiper-wrapper"),document.querySelector(".materials__wrapper").classList.add("materials__wrapper"),document.querySelector(".materials__container").classList.remove("swiper-container"),void document.querySelectorAll(".materials__card").forEach(e=>{e.classList.remove("swiper-slide")})):!1===e.matches?(document.querySelector(".materials__wrapper").classList.add("swiper-wrapper"),document.querySelector(".materials__wrapper").classList.remove("materials__wrapper"),document.querySelector(".materials__container").classList.add("swiper-container"),document.querySelectorAll(".materials__card").forEach(e=>{e.classList.add("swiper-slide")}),o()):void 0},o=function(){t=new Swiper(".materials__container",{grabCursor:!0,loop:!0,navigation:{nextEl:".controls__btns .controls__next",prevEl:".controls__btns .controls__prev"},breakpoints:{320:{slidesPerView:1,centeredSlides:!0},768:{slidesPerView:2,spaceBetween:10}}})};e.addListener(r),r()}if(document.querySelector(".plan")){document.querySelectorAll('[data-free="продан"], [data-free="зарезервирован"]').forEach(e=>{e.removeAttribute("xlink:href"),e.style.cursor="not-allowed"});tippy(document.querySelectorAll(".house"),{content:e=>`\n      <div class="tip">\n        <span class="tip__number"> Дом номер ${e.getAttribute("data-number")}</span>\n        <span class="tip__secion"> Секция ${e.getAttribute("data-section")}</span>\n        <p class="tip__square" style=" text-align:center">Площадь ${e.getAttribute("data-sqaure")} кв.м.</p>\n        <p class="tip__avaliable" style="text-align:center">${e.getAttribute("data-free")}</p>\n      </div>  \n        `,allowHTML:!0,animation:"scale"});new OuterTab(".outer-tabs"),document.querySelector(".compare-block")&&new Tab(".compare-block__tabs_first"),document.querySelector(".compare-block")&&new Tab(".compare-block__tabs_sec"),new BeerSlider(document.querySelector(".beer-slider"),{start:50})}if(document.querySelector(".duplexes")&&(document.querySelector(".compare-block")&&new BeerSlider(document.querySelector(".beer-slider"),{start:50}),document.querySelector(".compare-block")&&new Tab(".compare-block__tabs_first"),document.querySelector(".compare-block")&&new Tab(".compare-block__tabs_sec"),document.querySelector(".outer-tabs")&&new OuterTab(".outer-tabs")),document.querySelector(".page-inner")&&document.querySelector(".compare-block")&&new BeerSlider(document.querySelector(".beer-slider"),{start:50}),document.querySelector(".contacts")&&new Tab(".howtoget__tabs"),document.querySelector(".page-inner")){tippy(".houseprops__question",{placement:"bottom-start"}),document.querySelector(".compare-block")&&new Tab(".compare-block__tabs_first");tippy(document.querySelectorAll(".houseprops__svg"),{content:e=>`\n        <div class="tip">\n          <span class="tip__number"> Дом номер ${e.getAttribute("data-number")}</span>\n          <span class="tip__secion"> Секция ${e.getAttribute("data-section")}</span>\n          <p class="tip__square" style=" text-align:center">Площадь ${e.getAttribute("data-sqaure")} кв.м.</p>\n          <p class="tip__avaliable" style="text-align:center">${e.getAttribute("data-free")}</p>\n        </div>  \n      `,allowHTML:!0,animation:"scale",followCursor:!0})}gsap.timeline({}).staggerFromTo(".menu__list li",.3,{opacity:0,y:20},{opacity:1,y:0},.03).from(".offer__title",{opacity:0,y:30},"-=0.3").from(".offer__subtitle",{opacity:0,y:20},"-=0.3").from(".offer__btn",{opacity:0,y:20},"-=0.3").from(".offer__bottom",{opacity:0,y:20},"-=0.3"),gsap.registerPlugin(ScrollTrigger),gsap.from(".icon-dream",{scrollTrigger:{trigger:".icon-dream",start:"20px 80%"},y:30,opacity:0}),gsap.from(".map__wrapper",{scrollTrigger:{trigger:".map__wrapper",end:"center 20%",start:"10%, 70%",scrub:!0},x:-50,opacity:.3}),gsap.from(".gifts__container img",{scrollTrigger:{trigger:".gifts__container img",end:"center 70%",start:"20px, 80%"},x:-40,scale:.95,opacity:0}),gsap.from(".credit__media img",{scrollTrigger:{trigger:".credit__media img",end:"center 70%",start:"20px, 80%"},x:40,scale:.95,opacity:0});document.querySelector(".buttons__image").addEventListener("click",()=>{document.querySelectorAll(".buttons__wrapper li").forEach(e=>{e.classList.toggle("visible")})})}));